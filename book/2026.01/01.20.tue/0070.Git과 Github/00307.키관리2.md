https://github.com/putto4u/03.Ansible.IaC.InfraAuto/blob/main/0070.Git%EA%B3%BC%20Github/00307.%ED%82%A4%EA%B4%80%EB%A6%AC2.md

0070.Git과 Github/00307.키관리2
## SSH 키 생성 시 파일 이름 지정 및 관리

SSH 키를 생성할 때 기본값(`id_rsa`)을 사용하면 기존에 존재하는 키 파일이 덮어씌워질 위험이 있습니다. 이를 방지하기 위해 사용자가 직접 파일 이름을 지정하는 두 가지 방법을 설명합니다.

---

### 1. -f 옵션을 이용한 즉시 지정

`ssh-keygen` 명령어 실행 시 `-f` (file) 옵션을 사용하면 경로와 파일 이름을 미리 정의할 수 있습니다. 이 방식은 스크립트 작성이나 자동화 환경에서 유용합니다.

```bash
# 형식: ssh-keygen -f [경로/파일명]
ssh-keygen -t rsa -b 4096 -f ~/.ssh/my_project_key -C "your_email@example.com"


# 에이전트 초기화 및 실행
eval "$(ssh-agent -s)"

# 기존에 등록된 모든 키 제거 (선택 사항)
ssh-add -D

# 새로 생성한 키 등록
ssh-add ~/.ssh/본인이_생성한_키_이름
```

* **~/.ssh/my_project_key**: 현재 사용자의 `.ssh` 디렉터리에 `my_project_key`라는 이름으로 개인키를 생성하고, `my_project_key.pub`라는 이름으로 공개키를 생성합니다.

---

### 2. 대화형(Interactive) 입력 방식

옵션을 미리 입력하지 않고 명령어를 실행한 후, 생성 과정에서 이름을 변경할 수도 있습니다.

```bash
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"

```

위 명령어를 입력하면 다음과 같은 안내 문구가 출력됩니다.

```text
Generating public/private rsa key pair.
Enter file in which to save the key (/home/user/.ssh/id_rsa): 

```

이때 괄호 안의 기본 경로를 무시하고 **원하는 경로와 파일명**을 직접 입력하면 됩니다.

* 입력 예시: `/home/user/.ssh/github_work_key`

---

### 3. 생성된 키 확인 및 보안 설정

이름을 변경하여 생성한 후에는 파일이 정상적으로 존재하는지 확인하고, 보안을 위해 개인키의 권한을 제한해야 합니다.

* **파일 목록 확인**
```bash
ls -l ~/.ssh/

```


* **권한 설정 (Private Key)**
SSH 개인키는 소유자만 읽을 수 있어야 접속 시 오류가 발생하지 않습니다.
```bash
chmod 600 ~/.ssh/my_project_key

```



---

### 4. 다중 키 관리를 위한 SSH Config 활용

파일 이름을 다르게 생성한 경우, SSH 접속 시 어떤 키를 사용할지 매번 지정(`-i` 옵션)하는 대신 `~/.ssh/config` 파일을 설정하여 편리하게 관리할 수 있습니다.

```bash
# ~/.ssh/config 파일 예시
Host github.com-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/my_project_key

Host github.com-personal
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa

```

이렇게 설정하면 `ssh -i ~/.ssh/my_project_key ...` 대신 `ssh github.com-work`와 같은 방식으로 간단히 접속이 가능합니다.

Next Step: SSH Config 작성법

---

요청하신 대로 기존 키와 겹치지 않도록 이름을 지정하는 방법을 정리해 드렸습니다. 궁금하신 점이 더 있다면 말씀해 주세요.
